---
title: Hive部署
date: 2020-1-28 15:12:22
tags:
 - hadoop
 - hive
categories: 大数据
---



## Hive部署

1）下载

2）解压

3）添加HIVE_HOME到系统环境变量

4）修改配置 hive-env.sh

5）拷贝MySQL驱动包到$HIVE_HOME/lib

6）前提是要安装一个MySQL数据库

```
tar -zxvf hive-1.1.0-cdh5.16.2.tar.gz -C ~/app/

配置.bash_profile
export HIVE_HOME=/root/app/hive-1.1.0-cdh5.16.2
export PATH=$HIVE_HOME/bin:$PATH
```



在hive文件夹的conf文件夹内进行配置

```
# cp hive-env.sh.template hive-env.sh
```

若hadoop没有配置进环境变量，需要再hive-env.sh内配置HADOOP_HOME



配置hive-site.xml

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<configuration>
<property>
  <name>javax.jdo.option.ConnectionURL</name>
  <value>jdbc:mysql://hadoop000:3306/hadoop_hive?createDatabaseIfNotExist=true</value>
</property>

<property>
  <name>javax.jdo.option.ConnectionDriverName</name>
  <value>com.mysql.jdbc.Driver</value>
</property>

<property>
  <name>javax.jdo.option.ConnectionUserName</name>
  <value>root</value>
</property>

<property>
  <name>javax.jdo.option.ConnectionPassword</name>
  <value>root</value>
</property>
</configuration>
```

javax.jdo.option.ConnectionUserName对应mysql中的账号

javax.jdo.option.ConnectionPassword对应mysql中的密码



拷贝mysql的架包到hive文件夹下的lib文件夹中

```
cp mysql-connector-java-5.1.28.jar /root/app/hive-1.1.0-cdh5.16.2/lib/mysql-connector-java-5.1.28.jar
```



## hive编译安装

hive-1.1.0-cdh5.16.2-src.tar.gz已下载在~/tmp下

```
# cd /tmp/
# tar -xf hive-1.1.0-cdh5.16.2-src.tar.gz
# cd /hive-1.1.0-cdh5.16.2
# mvn clean package -DskipTests -Phadoop-2 -Pdist
```

之后会有一个比较长时间的等待

编译生成的包在以下位置：

packaging/target/apache-hive-1.1.0-cdh5.7.1-bin.tar.gz，之后就是像之前博客一样配置环境变量