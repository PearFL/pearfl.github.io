---
title: Scala隐式转换
date: 2020-3-21 16:42:17
tags:
 - scala
categories: 大数据
---

参考文档之一：https://docs.scala-lang.org/zh-cn/tour/implicit-conversions.html



## 隐式转换的前提

1.不存在二义性

2.隐式操作不能嵌套



## 隐式参数

当在程序中，同时有 隐式参数，默认值，传值时

编译器的优先级为 传值 > 隐式参数 > 默认值

在隐式参数匹配时，不能有二义性

如果三个（隐式参数，默认值，传值）一个都没有，就会报错



## 隐式转换函数

可以在不修改源代码的情况下，给类动态添加功能

```scala
implicit def x2y(普通的X):牛逼的Y = new 牛逼的Y(…)

eg:
class Man(val name: String)
class Superman(val name: String) {
  def emitLaser = println("emit a laster!")
}
implicit def man2superman(man: Man): Superman = new Superman(man.name)
val leo = new Man("leo")

leo.emitLaser
```



## 隐式类

1.所带的构造参数，有且只能有一个

2.隐式类必须被定义在“类”或“伴生对象”或“包对象”里，即隐式类不能是顶级的

3.隐式类不能是case class

4.作用域内不能有与之相同名称的标识符

```scala
implicit class Caculator(x: Int) {
def add(a: Int) = a + x
}
println(2.add(3))
```



