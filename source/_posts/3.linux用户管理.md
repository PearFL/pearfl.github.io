---
title: linux用户管理
date: 2019-12-30 16:38:22
tags:
 - 权限
 - linux
 - 用户
categories: linux
---



## 简易命令

```
useradd testuser  创建用户testuser
passwd testuser  给已创建的用户testuser设置密码
说明：新创建的用户会在/home下创建一个用户目录testuser
usermod --help  修改用户这个命令的相关参数
userdel testuser  删除用户testuser
rm -rf testuser  删除用户testuser所在目录
```



## 给用户添加root权限

使用Linux系统时，经常会被要求使用超级权限，但是root的权限太过大了，一般慎用！！！因此可以通过给普通用户添加sudo权限，平常用普通用户进行操作，当需要root权限的时候进行sudo操作。以下为解决办法：

```
1. 进入超级用户模式，也就是输入”su root”，系统会让你输入超级用户密码，输入密码后就进入了超级用户模式。（当然，你也可以直接用root进入修改）
2. 添加文件的写权限，也就是输入命令”chmod u+w /etc/sudoers”。
3. 编辑/etc/sudoers文件，也就是输入命令”vim /etc/sudoers”，进入编辑模式，找到这一 行：”root ALL=(ALL) ALL”（会用vim编辑器的可以使用“/root ALL=(ALL)ALL”定位）在其下面添加”xxx ALL=(ALL) ALL”(这里的xxx是你的用户名)，然后保存退出。
4. 撤销文件的写权限，也就是输入命令”chmod u-w /etc/sudoers”。
```



## 修改hostname

```
sudo hostnamectl set-hostname <newhostname>
```





## 用户和用户组

用户：使用操作系统的人

用户组：具有相同系统权限的一组用户

```linux
/etc/group 存储当前系统中所有用户组信息
- Group:     x    : 123 : abc,def,xyz
- 组名称:组密码占位符:组编号:组中用户列表名

/etc/gshadow 存储当前系统中用户组的密码信息
- Group:  *  :       :abc,def,xyz
- 组名称:组密码:组管理者:组中用户列表名

/etc/passwd 存储当前系统中所有用户的信息
- user :    x   :   123 :   456   : xxxxxxx : /home/user : /bin/bash
- 用户名:密码占位符:用户编号:用户组编号:用户注释信息: 用户主目录  : shell类型

/etc/shadow 存储当前系统中所有用户的密码信息
- user : xxx :::::
- 用户名: 密码 ::::
```

```
一套样例

# groupadd sexy 创建sexy用户组
# groupadd -n market sexy 用sexy组名改为market
# groupmod -g 668 market 修改market用户组编号
# groupadd -g 888 boss 创建boss用户组，编号为888
# groupdel market 删除market用户组
# useradd -g sexy sdf 添加用户
# useradd -g sexy jzmb
# useradd -d /home/xxx imooc 添加用户并指定用户文件夹所在位置
# usermod -c dgdzmx sdf 修改sdf注释
# usermod -l cls sdf 用户名sdf更改为cls
# usermod -d /home/cls cls 修改cls文件夹路径
# usermod -g sexy imooc imooc切换进sexy用户组
# userdel jzmb 删除jzmb账号
# userdel -r jzmb 删除jzmb用户文件夹

touch /etc/nologin 禁止root以外的其他账户登录
```



```linux
# passwd -l cls 锁定cls
# passwd -u cls 解锁cls
# passwd -d cls cls账户无密码登录
```



## 主要组和附属组

用户可以同时属于多个组

- 一个主要组
- 多个附属组

```linux
一套样例

# gpasswd -a cls boss boss组变为cls的附属组,用逗号可以添加多个附属组
# newgrp boss （cls自己执行，切换到boss组）
# gpasswd -a cls boss cls不在是boss组的附属组
```







&emsp;&emsp;

