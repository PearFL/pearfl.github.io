---
title: hadoop单结点集群搭建
date: 2020-1-6 17:25:13
tags:
 - hadoop
categories: 大数据
---

官网描述:https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/SingleCluster.html

本文在官网描述的基础上做翻译和细节补充



## hadoop部署

类似于前一篇章的jdk部署

```
tar -zxvf hadoop-2.6.0-cdh5.16.2.tar.gz -C ~/app/

hadoop软件包常见目录说明
	bin: hadoop客户端命令
	etc: hadoop相关的配置文件存放目录
	sbin:启动hadoop相关进程的脚本
	share:常用例子

配置.bash_profile
export HADOOP_HOME=/home/pearfl/app/hadoop-2.6.0-cdh5.16.2
export PATH=$HADOOP_HOME/bin:$PATH
```



修改相关的配置文件

```
hadoop-env.sh内需要配置JAVA_HOME
localhost:8020中的localhost需要修改

core-site.xml
<configuration>
    <property>
        <name>fs.defaultFS</name>
        <value>hdfs://hadoop000:8020</value>
    </property>
</configuration>

hdfs-site.xml
其中hadoop.tmp.dir修改是因为机器每次重启时候会清空tmp目录
<configuration>
    <property>
        <name>dfs.replication</name>
        <value>1</value>
    </property>
    <property>
        <name>hadoop.tmp.dir</name>
        <value>/home/pearfl/app/tmp</value>
    </property>
</configuration>

slaves
	mxh(设置成你喜欢的就行了，注意需要与hostname一致)
```



启动HDFS：第一次执行的时候一定要格式化文件系统，不要重复执行

```
hdfs namenode -format
```


启动集群

```
$HADOOP_HOME/sbin/start-dfs.sh
验证:
#jps
8148 NameNode
8245 DataNode
8540 SecondaryNameNode
```

