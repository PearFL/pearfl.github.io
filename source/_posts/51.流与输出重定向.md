---
title: 流与输出重定向
date: 2020-3-10 14:47:10
tags:
 - 重定向
categories: linux
---

流就是读一点数据, 处理一点点数据

重定向，是什么意思呢？简单来说，就是我们可以把本来要显示在终端的命令结果，输送到别的地方：到文件中或者作为其他命令的输入（命令的链接，或者叫命令管道）。



- \> ：重定向到文件中。如果文件已存在，则覆盖文件内容；文件不存在，则创建文件。
- \>> ：重定向到文件末尾。如果文件不存在，则创建文件。



\> 和 >> 符号只是将标准输出重定向到文件，并不能将标准错误输出重定向到文件。

那么我们要重定向标准错误输出，该怎么办呢？

我们就要用到 2> 这个符号。是的，就是在 > 这个符号左边紧挨着写一个 2。

为什么是 2 呢？标准错误输出的文件描述符是 2，所以这里的 2 表示标准错误输出。如果没有 2，单独的 > 符号就是重定向标准输出（文件描述符为 1）。

我们补充一下命令：

```
cat not_exist_file.csv > results.txt 2> errors.log
```

这个命令里有两个重定向：

- \> results.txt ：将标准输出重定向到 results.txt 文件中；
- 2> errors.log ：将标准错误输出重定向到 errors.log 文件中。

也就是说：

- 假如 not_exist_file.csv 这个文件确实存在，将其内容写入 results.txt 文件中。
- 假如 not_exist_file.csv 这个文件不存在，将错误信息写入 errors.log 文件中。



#### 合并输出

上面我们学习了如何将标准输出和标准错误输出分别重定向到不同文件。但是有的时候，我们比较“任性”，就想把标准输出和标准错误输出都重定向到同一个地方。怎么做呢？

须要使用 2>&1 这个组合符号。

看着怪怪的对吧？仅由四个字符组成。这个符号的作用是：将标准错误输出重定向到与标准输出相同的地方。

我们用实例演示一下：

```
cat not_exist_file.csv > results.txt 2>&1
```

上面的命令的作用是：将 `cat not_exist_file.csv` 这个命令的所有输出（标准输出和标准错误输出）都重定向到 results.txt 文件中。



#### 小结

- 2> ：将标准错误输出重定向到文件。如果文件已经存在，则覆盖文件内容；如果不存在，则创建文件。
- 2>> ：将标准错误输出重定向到文件末尾。如果文件不存在，则创建文件。
- 2>&1 ：将标准输出和标准错误输出重定向到同一个地方。